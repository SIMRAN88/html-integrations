<h1 class="page-title">IntegrationModel</h1>







<section>

<header>
    
        <h2>
        IntegrationModel
        </h2>
        
            <div class="class-description"><p>This class represents an integration model, allowing the integration script to
communicate with Core class. Each integration must extend this class.</p></div>
        
    
</header>



<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name " id="IntegrationModel">new <a href="integrationmodel.js.html#line38">IntegrationModel</a><span class="signature">(integrationModelProperties)</span><span class="type-signature"></span>

    

    </h4>

    











    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>integrationModelProperties</code> <code>(<span class="param-type"><a href="global.html#IntegrationModelProperties">IntegrationModelProperties</a></span>)</code>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















    
    </div>

    

    

    

    

     

    

    
        <h2 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".integrationParameters"><a href="integrationmodel.js.html#line528">integrationParameters</a><span class="type-signature">: Object</span>

   <span class="member-attr static">static</span>

</h4>




<div class="description">
    <p>An object containing a list with the overwritable class constructor properties.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="callbackMethodArguments"><a href="integrationmodel.js.html#line92">callbackMethodArguments</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Object containing the arguments needed by the callback function.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="configurationService"><a href="integrationmodel.js.html#line58">configurationService</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Configuration service path. The integration service is needed by Core class to
load all the backend configuration into the frontend and also to create the paths
of all services (all services lives in the same route). Mandatory property.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="core"><a href="integrationmodel.js.html#line150">core</a><span class="type-signature">: <a href="Core.html">Core</a></span>

</h4>




<div class="description">
    <p>The Core class instance associated to the integration model.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="editorObject"><a href="integrationmodel.js.html#line118">editorObject</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Instance of the integration editor object. Usually the entry point to access the API
of a HTML editor.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="environment"><a href="integrationmodel.js.html#line101">environment</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Contains information about the integration environment:
like the name of the editor, the version, etc.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="isIframe"><a href="integrationmodel.js.html#line109">isIframe</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Indicates if the DOM target is - or not - and iframe.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="language"><a href="integrationmodel.js.html#line42">language</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Language. Needed for accessibility and locales. English by default.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="listeners"><a href="integrationmodel.js.html#line156">listeners</a><span class="type-signature">: <a href="Listeners.html">Listeners</a></span>

</h4>




<div class="description">
    <p>Integration model listeners.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="managesLanguage"><a href="integrationmodel.js.html#line134">managesLanguage</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Specifies if the integration model exposes the locale strings. false by default.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="rtl"><a href="integrationmodel.js.html#line126">rtl</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>Specifies if the direction of the text is RTL. false by default.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="serviceProviderProperties"><a href="integrationmodel.js.html#line48">serviceProviderProperties</a><span class="type-signature">: <a href="global.html#ServiceProviderProperties">ServiceProviderProperties</a></span>

</h4>




<div class="description">
    <p>Service parameters</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="target"><a href="integrationmodel.js.html#line75">target</a><span class="type-signature"></span>

</h4>




<div class="description">
    <p>DOM target in which the plugin works. Needed to associate events, insert formulas, etc.
Mandatory property.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="temporalImageResizing"><a href="integrationmodel.js.html#line144">temporalImageResizing</a><span class="type-signature">: boolean</span>

</h4>




<div class="description">
    <p>Indicates if an image is selected. Needed to resize the image to the original size in case
the image is resized.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
            
<h4 class="name" id="version"><a href="integrationmodel.js.html#line69">version</a><span class="type-signature">: string</span>

</h4>




<div class="description">
    <p>Plugin version. Needed to stats and caching.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






        
    

    
        <h2 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name " id="addEvents"><a href="integrationmodel.js.html#line374">addEvents</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Add events to formulas in the DOM target. The events added are the following:</p>
<ul>
<li>doubleClickHandler: handles double click event on formulas by opening an editor
to edit them.</li>
<li>mouseDownHandler: handles mouse down event on formulas by saving the size of the formula
in case the the formula is resized.</li>
<li>mouseUpHandler: handles mouse up event on formulas by restoring the saved formula size
in case the formula is resized.</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="callbackFunction"><a href="integrationmodel.js.html#line469">callbackFunction</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>This function is called once the <a href="Core.html"><code>Core</code></a> is loaded. IntegrationModel class
will fire this method when <a href="Core.html"><code>Core</code></a> 'onLoad' event is fired.
This method should content all the logic to init
the integration.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="doubleClickHandler"><a href="integrationmodel.js.html#line395">doubleClickHandler</a><span class="signature">(element)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Handles a double click on the target element. Opens an editor
to re-edit the double-clicked formula.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>element</code> <code>(<span class="param-type">HTMLElement</span>)</code>&nbsp;&nbsp<p>DOM object target.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="fillNonLatexNode"><a href="integrationmodel.js.html#line506">fillNonLatexNode</a><span class="signature">(event, window, mathml)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Wrapper
It fills wrs event object of nonLatex with the desired data.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>event</code> <code>(<span class="param-type">Object</span>)</code>&nbsp;&nbsp<p>event object.</p>
     
  </li>
  
  <li>
     <code>window</code> <code>(<span class="param-type">Object</span>)</code>&nbsp;&nbsp<p>dom window object.</p>
     
  </li>
  
  <li>
     <code>mathml</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>valid mathml.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getBrowserLanguage"><a href="integrationmodel.js.html#line451">getBrowserLanguage</a><span class="signature">()</span><span class="type-signature"> &rarr;  string</span>

    

    </h4>

    



<div class="description">
    <p>Returns the browser language.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getCore"><a href="integrationmodel.js.html#line262">getCore</a><span class="signature">()</span><span class="type-signature"> &rarr;  <a href="Core.html">Core</a></span>

    

    </h4>

    



<div class="description">
    <p>Returns the Core instance.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getLanguage"><a href="integrationmodel.js.html#line442">getLanguage</a><span class="signature">()</span><span class="type-signature"> &rarr;  string</span>

    

    </h4>

    



<div class="description">
    <p>Returns the integration language. By default the browser agent. This method
should be overwritten to obtain the integration language, for example using the
plugin API of an HTML editor.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getMathmlFromTextNode"><a href="integrationmodel.js.html#line496">getMathmlFromTextNode</a><span class="signature">(textNode, caretPosition)</span><span class="type-signature"> &rarr;  string</span>

    

    </h4>

    



<div class="description">
    <p>Wrapper.
Extracts mathml of a determined text node. This function is used as a wrapper inside core.js
in order to get mathml from a text node that can contain normal LaTeX or other chosen text.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>textNode</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>text node to extract the MathML.</p>
     
  </li>
  
  <li>
     <code>caretPosition</code> <code>(<span class="param-type">int</span>)</code>&nbsp;&nbsp<p>caret position inside the text node.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getPath"><a href="integrationmodel.js.html#line218">getPath</a><span class="signature">()</span><span class="type-signature"> &rarr;  string</span>

    

    </h4>

    



<div class="description">
    <p>Returns the absolute path of the integration script.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getSelectedItem"><a href="integrationmodel.js.html#line515">getSelectedItem</a><span class="signature">(target, iframe)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Wrapper.
Returns selected item from the target.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>target</code> <code>(<span class="param-type">HTMLElement</span>)</code>&nbsp;&nbsp<p>target element</p>
     
  </li>
  
  <li>
     <code>iframe</code> <code>(<span class="param-type">boolean</span>)</code>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getSelection"><a href="integrationmodel.js.html#line356">getSelection</a><span class="signature">()</span><span class="type-signature"> &rarr;  Selection</span>

    

    </h4>

    



<div class="description">
    <p>Returns the target selection.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="getVersion"><a href="integrationmodel.js.html#line237">getVersion</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Returns integration model plugin version</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code></code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>Plugin version</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="init"><a href="integrationmodel.js.html#line175">init</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Init function. Usually called from the integration side once the core.js file is loaded.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="insertFormula"><a href="integrationmodel.js.html#line348">insertFormula</a><span class="signature">(mathml, editMode)</span><span class="type-signature"> &rarr;  <a href="global.html#ReturnObject">ReturnObject</a></span>

    

    </h4>

    



<div class="description">
    <p>Wrapper to Core.insertFormula method.
Inserts the formula in the specified target, creating
a new image (new formula) or updating an existing one.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>mathml</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>MathML to generate the formula.</p>
     
  </li>
  
  <li>
     <code>editMode</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>Edit Mode (LaTeX or images).</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="mousedownHandler"><a href="integrationmodel.js.html#line428">mousedownHandler</a><span class="signature">(element)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Handles a mouse down event on the target element. Saves the formula size to avoid
resizing formulas.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>element</code> <code>(<span class="param-type">HTMLElement</span>)</code>&nbsp;&nbsp<p>target element.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="mouseupHandler"><a href="integrationmodel.js.html#line415">mouseupHandler</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Handles a mouse up event on the target element. Restores the image size to avoid
resizing formulas.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="notifyWindowClosed"><a href="integrationmodel.js.html#line482">notifyWindowClosed</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Function called when the content submits an action.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="openExistingFormulaEditor"><a href="integrationmodel.js.html#line296">openExistingFormulaEditor</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Opens formula editor to editing an existing formula. Can be overwritten in order to make some
actions from integration part before the formula is edited.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="openNewFormulaEditor"><a href="integrationmodel.js.html#line287">openNewFormulaEditor</a><span class="signature">()</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Opens formula editor to editing a new formula. Can be overwritten in order to make some
actions from integration part before the formula is edited.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="setCore"><a href="integrationmodel.js.html#line253">setCore</a><span class="signature">(core)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Sets a Core instance.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>core</code> <code>(<span class="param-type"><a href="Core.html">Core</a></span>)</code>&nbsp;&nbsp<p>instance of Core class.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="setEditorObject"><a href="integrationmodel.js.html#line279">setEditorObject</a><span class="signature">(editorObject)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Sets the editor object.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>editorObject</code> <code>(<span class="param-type">Object</span>)</code>&nbsp;&nbsp<p>The editor object.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="setLanguage"><a href="integrationmodel.js.html#line245">setLanguage</a><span class="signature">(language)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Sets the language property.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>language</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>language code.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="setTarget"><a href="integrationmodel.js.html#line270">setTarget</a><span class="signature">(target)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Sets the object target and updates the iframe property.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>target</code> <code>(<span class="param-type">HTMLElement</span>)</code>&nbsp;&nbsp<p>target object.</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
            

    

    <h4 class="name " id="updateFormula"><a href="integrationmodel.js.html#line309">updateFormula</a><span class="signature">(mathml, editMode)</span><span class="type-signature"></span>

    

    </h4>

    



<div class="description">
    <p>Wrapper to Core.updateFormula method.
Transform a MathML into a image formula.
Then the image formula is inserted in the specified target, creating a new image (new formula)
or updating an existing one.</p>
</div>









    <h5>Arguments:</h5>
    

<ol>
  
  <li>
     <code>mathml</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>MathML to generate the formula.</p>
     
  </li>
  
  <li>
     <code>editMode</code> <code>(<span class="param-type">string</span>)</code>&nbsp;&nbsp<p>Edit Mode (LaTeX or images).</p>
     
  </li>
  
</ol>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
















        
    

    

    
</article>

</section>
<div class="forScrollToTop"></div>