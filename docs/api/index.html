<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../prism.css">
    <!-- GitBook Markdown CSS -->
    <link rel="stylesheet" href="../gitbook-style.css">
    <title>Doc</title>

</head>
<body>
<div class="dropdown">
    <div class="dropdown-menu" id="search-result">
    </div>
</div>
<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light py-1">
    <div class="navbar-brand">
        <a href="/">
            <img src=https://fme.upc.edu/ca/universitat-empresa/activitats/logos-fotos%20jornada-fme-empresa/wiris_mathandscience_transparent.jpg/@@images/image.jpeg class="d-inline-block align-middle logo mr2"
                 alt="logo"></a>
        <a href="../index.html">UB DOC</a>
    </div>

    <ul class="navbar-nav">
            <li class="nav-item d-none d-md-block">
                <a class="nav-link" href="../pages/tutorials/angular/generic.html">Server Docs</a>
            </li>
            <li class="nav-item d-none d-md-block">
                <a class="nav-link" href="../pages/tutorials/angular/generic.html">Client Docs</a>
            </li>
            <li class="nav-item d-none d-md-block">
                <a class="nav-link" href="../pages/tutorials/angular/generic.html">Tutorials</a>
            </li>
            <li class="nav-item d-none d-md-block">
                <a class="nav-link" href="../pages/tutorials/angular/generic.html">Getting Started</a>
            </li>

        <li class="nav-item dropdown d-xl-none d-lg-none d-md-none">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
                Links
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../pages/tutorials/angular/generic.html">Server Docs</a>
                    <a class="dropdown-item" href="../pages/tutorials/angular/generic.html">Client Docs</a>
                    <a class="dropdown-item" href="../pages/tutorials/angular/generic.html">Tutorials</a>
                    <a class="dropdown-item" href="../pages/tutorials/angular/generic.html">Getting Started</a>
            </div>
        </li>
    </ul>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
</nav>
<div class="container-fluid">
    <div data-server-rendered="true" class="row flex-xl-nowrap"><div id="nav" class="col-12 col-md-3 col-xl-2 bd-sidebar collapse navbar-collapse"><form autocomplete="off" class="bd-search align-items-center my-2"><input type="search" placeholder="Search" aria-label="Search" id="search" class="form-control mr-sm-2"></form> <div class="sidebar"><ul id="accordionNav" class="main-nav accordion"><li><button type="button" data-toggle="collapse" data-target="#collapseModules" aria-expanded="true" aria-controls="collapseModules" class="btn"><span>Modules</span> <i class="fas fa-caret-down"></i></button> <div id="collapseModules" aria-labelledby="headingModules" data-parent="#accordionNav" class="collapse show"><ul class="sub-nav"><li><a href="module-my_jacket.html">my/jacket</a></li></ul></div></li><li><button type="button" data-toggle="collapse" data-target="#collapseClasses" aria-expanded="false" aria-controls="collapseClasses" class="btn"><span>Classes</span> <i class="fas fa-caret-right"></i></button> <div id="collapseClasses" aria-labelledby="headingClasses" data-parent="#accordionNav" class="collapse"><ul class="sub-nav"><li><a href="Accessibility.html">Accessibility</a></li><li><a href="Configuration.html">Configuration</a></li><li><a href="Constants.html">Constants</a></li><li><a href="ContentManager.html">ContentManager</a></li><li><a href="Core.html">Core</a></li><li><a href="CustomEditors.html">CustomEditors</a></li><li><a href="EditorListener.html">EditorListener</a></li><li><a href="Event.html">Event</a></li><li><a href="Image.html">Image</a></li><li><a href="IntegrationModel.html">IntegrationModel</a></li><li><a href="Latex.html">Latex</a></li><li><a href="Listeners.html">Listeners</a></li><li><a href="MathML.html">MathML</a></li><li><a href="ModalDialog.html">ModalDialog</a></li><li><a href="module:my_jacket.html">module:my/jacket</a></li><li><a href="Parser.html">Parser</a></li><li><a href="PopUpMessage.html">PopUpMessage</a></li><li><a href="ServiceProvider.html">ServiceProvider</a></li><li><a href="StringManager.html">StringManager</a></li><li><a href="TelemetryService.html">TelemetryService</a></li><li><a href="TextCache.html">TextCache</a></li><li><a href="Util.html">Util</a></li></ul></div></li></ul></div></div> <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content markdown-section"><p><h1>Mono-repository for the MathType Web plugins and their dependencies.   <img src="https://pbs.twimg.com/profile_images/968130684719190016/bKicbmwM.jpg" width="40"></h1>
<p><a href="CONTRIBUITING.md"><img src="https://img.shields.io/badge/Maintained%3F-yes-green.svg" alt="Maintenance"></a> <a href="CONTRIBUITING.md"><img src="https://img.shields.io/badge/Updated%3F-yes-green.svg" alt="Updated"></a> <a href="https://github.com/wiris/html-integrations/graphs/traffic"><img src="https://img.shields.io/static/v1.svg?label=Downloads&amp;message=40&amp;color=blue" alt="Downloads"></a></p>
<p>Mono-repository for the <a href="http://www.wiris.com/en/mathtype">MathType</a> Web plugins and their dependencies.</p>
<p><img src="https://docs.wiris.com/_media/en/mathtype/mathtype_web/using_webpage.png?w=600&amp;tok=e85cb3" alt="Wiris mathtype plugin example"></p>
<h2>Table of contents</h2>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#file-manifest">File Manifest</a>
<ul>
<li><a href="#important-files--folder-structure">Important files &amp; folder structure</a></li>
<li><a href="#supported-editors">Supported editors</a></li>
</ul>
</li>
<li><a href="#quick-start">Quick start</a>
<ul>
<li><a href="#cloning">Cloning</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#bootstrapping">Bootstrapping</a></li>
<li><a href="#compiling">Compiling</a></li>
<li><a href="#batch-actions">Batch actions</a>
<ul>
<li><a href="#compiling-packages-individually">Compiling packages individually</a></li>
<li><a href="#compile-packages-by-technology">Compile packages by technology</a></li>
<li><a href="#cleaning-up">Cleaning up</a></li>
</ul>
</li>
<li><a href="#analyzing-and-fixing-code">Analyzing and fixing code</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#versioning">Versioning</a></li>
<li><a href="#publishing">Publishing</a></li>
</ul>
</li>
<li><a href="#examples-for-developers">Examples for developers</a></li>
<li><a href="#more-information">More information</a></li>
<li><a href="#privacy-policy">Privacy policy</a></li>
<li><a href="#contact-information">Contact information</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2>Requirements</h2>
<p>This project requires basic knowledge of the <code>git</code> and <code>npm</code> commands.
It also uses the <code>npx</code> tool which comes bundled with <code>npm</code>.</p>
<p>To install node and npm follow this <a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">guide-npm</a>, and use this other one <a href="https://www.atlassian.com/git/tutorials/install-git">guide-git</a> to install git.</p>
<p><a href="https://lerna.js.org/">Lerna</a> is used as a cornerstone of the project structure. Its main features are explained in this guide.</p>
<p>In case you want to run the automated tests included on this repository, you will need to install <a href="https://jestjs.io">Jest</a> on your local machine.</p>
<h2>File Manifest</h2>
<h3>Important files &amp; folder structure</h3>
<p>In this section we give a small description of the files that we consider the most important of the project, also we will talk about the content of the subfolders of the project and its usefulness.</p>
<ul>
<li><code>lerna.json</code>, <code>package.json</code>, <code>package-lock.json</code>. Configuration files for the
root npm package and the Lerna mono-repository.</li>
<li><code>packages/</code>. Each folder contains one npm package. All the usual npm commands
work inside.</li>
<li><code>demos/</code>. A growing set of technical demos to help developers integrate these plugins on different scenarios.</li>
<li><code>scripts/</code>. Folder containing different scripts used at compile time, etc.</li>
<li><code>resources</code>. Folder containing different resources files that are needed in the demos folder.</li>
</ul>
<h3>Supported editors</h3>
<p>In the next list, you will see the editors that have a specialized WIRIS plugin of the mathtype formula editor.</p>
<ul>
<li>CKEditor</li>
<li>Froala</li>
<li>TinyMCE</li>
<li>Generic*</li>
</ul>
<blockquote>
<p>*: generic is a global integration made so that, from there, the WIRIS plugin can be integrated into any editor by following its steps.</p>
</blockquote>
<h2>Quick start</h2>
<p>Follow these instructions to use the libraries.</p>
<h3>Cloning</h3>
<p>First, clone the repository</p>
<h4>Linux/Mac</h4>
<pre class="prettyprint source lang-sh"><code>$ git clone https://github.com/wiris/html-integrations
$ cd html-integrations
html-integrations$
</code></pre>
<h4>Windows</h4>
<p>You will need to have administrator privileges or activate
<a href="https://docs.microsoft.com/en-us/windows/uwp/get-started/enable-your-device-for-development">developer mode</a>
in your account, and then use the <code>core.symlinks</code> when cloning the repository:</p>
<pre class="prettyprint source lang-sh"><code>projects$ git clone --config core.symlinks=true https://github.com/wiris/html-integrations
</code></pre>
<h3>Installation</h3>
<p>After cloning this repo, open a Terminal window to run these next commands:</p>
<pre class="prettyprint source lang-sh"><code>$ npm install
$ npm start
</code></pre>
<p>In case you want to try out the <a href="#technical-demos">Technical Demos</a> you can go to the <strong>demos</strong> folder and follow the instructions you can find in the folder README file.</p>
<h3>Bootstrapping</h3>
<p>The mono-repository is managed through <a href="https://lerna.js.org/">Lerna</a>, a tool
designed for maintaining multiple npm packages in a single git repository.</p>
<p>Before using Lerna, it is recommended to install the development dependencies
stated in the root <code>package.json</code> file as they are used in the scripts of all
packages:</p>
<pre class="prettyprint source lang-sh"><code>html-integrations$ npm install
</code></pre>
<h3>Compiling</h3>
<p>It is possible to compile manually all the packages. What this does is try to find
which dependencies of the mono-repo packages are present inside the mono-repo
itself, and link to them instead of downloading them from the npm repository.</p>
<pre class="prettyprint source lang-sh"><code>html-integrations$ npm start
</code></pre>
<p>If this fails, try using <code>npx</code>:</p>
<pre class="prettyprint source lang-sh"><code>html-integrations$ ./packages/mathtype-ckeditor5/npm pack
html-integrations$ npx lerna bootstrap
</code></pre>
<h3>Batch actions</h3>
<h4>Compiling packages individually</h4>
<p>To try out a single package, it can be compiled individually as such:</p>
<pre class="prettyprint source lang-sh"><code>html-integrations/packages/mathtype-[editor]$ npm run compile -- [tech] [--dev]
</code></pre>
<p>Where [editor] can be any of:</p>
<ul>
<li><code>ckeditor4</code></li>
<li><code>ckeditor5</code></li>
<li><code>froala</code></li>
<li><code>froala3</code></li>
<li><code>generic</code></li>
<li><code>tinymce4</code></li>
<li><code>tinymce5</code></li>
</ul>
<p>and [tech] can be any of:</p>
<ul>
<li><code>aspx</code></li>
<li><code>java</code></li>
<li><code>npm</code></li>
<li><code>php</code></li>
<li><code>ruby</code></li>
</ul>
<p>The <code>--dev</code> optional flag calls the <code>build-dev</code> script defined in the plugin's <code>package.json</code>
instead of the <code>build</code> script.</p>
<p>This replaces the service provider URI and server with the appropriate values,
builds the sources with Webpack, and places the result in
<code>html-integrations/output/[tech]-[editor]</code>.</p>
<h4>Compile packages by technology</h4>
<p>Lerna allows to run a single command on all or any packages in the
mono-repository. For example, you can build all editors for a all technologies
like this:</p>
<pre class="prettyprint source lang-sh"><code>html-integrations$ npx lerna run compile -- npm
</code></pre>
<h4>Cleaning up</h4>
<p>Clean the output in the root folder and in the packages:</p>
<pre class="prettyprint source lang-sh"><code>html-integrations$ npm run clean
</code></pre>
<p>Clean the outputs and also all of the <code>node_modules</code>:</p>
<pre class="prettyprint source lang-sh"><code>html-integrations$ npm run clean-all
</code></pre>
<p>This will require you to <code>npm i</code> and <code>npm start</code> in the root again.</p>
<h3>Analyzing and fixing code</h3>
<p>There are configuration files at the root of the project to help. They statically analyze and fix code errors in files with extensions .js, .css and .html. The analysis shows the error and where it is, then it can be fixed. The commands are:</p>
<p><strong>Check all the .js files</strong></p>
<pre class="prettyprint source lang-sh"><code>  $ npx eslint --quiet [options] &lt;dir|file|glob>*
</code></pre>
<p><strong>Check all the .css files</strong></p>
<pre class="prettyprint source lang-sh"><code>    $ npx stylelint [options] &lt;dir|file|glob>*
</code></pre>
<p><strong>Check all the .html files</strong></p>
<pre class="prettyprint source lang-sh"><code>    $ html-validate [options] &lt;dir|file|glob>*
</code></pre>
<p>It is possible to automatically fix some of the errors, just add the <code>--fix</code> option in the desired command and run it.</p>
<h3>Testing</h3>
<p>We have prepared a set of tests to validate our packages code and developer code examples. There are unit, integration and e2e tests; for the latter we have used an extension called Pupeeteer.</p>
<p><strong>Run all tests at once</strong></p>
<p>All tests can be executed with the <code>npm test</code> command from the root of the project. Tests will be run on all wiris packages and all the demos that exists.</p>
<pre class="prettyprint source lang-sh"><code>  $ npm test
</code></pre>
<p><strong>Run all tests for a certain package/demo</strong></p>
<p>You can run the specific tests of a package or one of the demos as example code, by executing in your directory the <code>npm test</code> command.</p>
<p>For example</p>
<pre class="prettyprint source lang-sh"><code>  # Run the MathType package demo.
  $ cd packages/mathtype-html-integration-devkit/generic
  $ npm install
  $ npm start
  # Wait for the demo to start.
  # Then, run the tests on a new Terminal window.
  $ npm test
</code></pre>
<h3>Versioning</h3>
<p>In this project <a href="https://semver.org">semantic</a>, <a href="https://github.com/lerna/lerna#independent-mode">independent</a> versioning is used.</p>
<p>The semantic version convention is applied:</p>
<blockquote>
<p>Given a version number MAJOR.MINOR.PATCH, increment the:</p>
<ol>
<li>MAJOR version when you make incompatible API changes,</li>
<li>MINOR version when you add functionality in a backwards compatible manner, and</li>
<li>PATCH version when you make backwards compatible bug fixes.</li>
</ol>
</blockquote>
<p>Lerna introduces a tool <code>lerna version</code> useful for updating the appropriate
number for each package that has changes, making a commit, and tagging it.</p>
<p>In general, when publishing changes, just run:</p>
<pre class="prettyprint source lang-sh"><code>  $ lerna version --exact
</code></pre>
<p>This will prompt you with each package with changes since the last version
and ask you whether to increase the patch, minor, or major number.</p>
<p>It is responsibility of the developer to keep track of which kind of changes
have been introduced in each package.</p>
<p>The <code>--exact</code> option forces Lerna to modify packages that depend on others that
have been modified. For example, if <code>@wiris/mathtype-html-integration-devkit</code> is
modified, all the editor plugins that depend on it will also require to have
their version increased.</p>
<h3>Publishing</h3>
<p>Each editor plugin that is distributed built (e.g. those that include a
<code>webpack.config.js</code> file) must have a <code>prepack</code>
<a href="https://docs.npmjs.com/misc/scripts">npm lifecycle script</a>, which is run
BEFORE a tarball is packed (on <code>npm pack</code>, <code>npm publish</code>, and when installing
git dependencies).</p>
<p>This script should build the package (generally by calling <code>npm run build</code>).
As a special case, the TinyMCE plugins call the <code>services/compile.js</code> script
because they need to have the source replaced before building.</p>
<h2>Examples for developers</h2>
<p>In order to manually test each plugin, there's a set of technical demos on
the <a href="./demos/">'demos/'</a> folder on this project.</p>
<p>Refer to the <a href="demos/README.md">README</a> file for more information.</p>
<h2>Contact information</h2>
<p>team.support.europe@wiris.com</p>
<h2>Privacy policy</h2>
<p>The <a href="http://www.wiris.com/mathtype/privacy-policy">MathType Privacy Policy</a> covers the data processing operations for the MathType users. It is an addendum of the company’s general Privacy Policy and the <a href="https://wiris.com/en/privacy-policy">general Privacy Policy</a> still applies to MathType users.</p>
<h2>License</h2>
<p>Copyright © 2010-2020 <a href="http://www.wiris.com">WIRIS</a>. Released under the <a href="LICENSE">MIT License</a>.</p></p></main> <div contents="" class="d-none d-xl-block col-xl-2 bd-toc"></div></div>
</div>
<!-- Optional JavaScript -->
<script>
  // const buttons = document.querySelectorAll('button[data-toggle="collapse"]')
  // buttons.forEach(btn => {
  //   btn.addEventListener('click', (event) => {
  //     // console.log(event.target)
  //     buttons.forEach(b => {
  //       b.childNodes[0].textContent = b === event.target && !b.getAttribute('aria-expanded') ? '►' : '▼'
  //     })
  //   })
  // })
</script>
<script src="https://cdn.jsdelivr.net/gh/nextapps-de/flexsearch@0.6.2/dist/flexsearch.min.js"></script>

<script>
  //search
  const feeds = new FlexSearch({
      doc: {
        id: 'id',
        field: [
          'name',
          'description'
        ]
      }
    }
  )
  const getFTSData = () => {
    window.FTSData = window.FTSData ? Promise.resolve(window.FTSData) : Promise.all([
      window.fetch('ftsIndex.json'),
      window.fetch('ftsData.json')
    ]).then(values => Promise.all([values[0].json(), values[1].json()]))
      .then(valuesInJSON => {
        feeds.import(valuesInJSON[0])
        return {
          ftsIndex: feeds,
          ftsData: valuesInJSON[1]
        }
      })
    return window.FTSData
  }
  const fullTextSearch = textToSearch => {
    getFTSData().then(searchData => {
      const result = searchData.ftsIndex.search(textToSearch)
      const dataToDisplay = result.slice(0, 10).map(el =>
              Object.assign(searchData.ftsData[el.id], {
                name: el.name,
                description: el.description
              }))
      document.querySelector('#search-result').classList.add('show')
      document.querySelector('#search-result').innerHTML = dataToDisplay.length > 0 ? dataToDisplay
              .map(el => renderItem(el, textToSearch)).join('<div class="dropdown-divider"></div>') : '<div class="dropdown-item">No results found</div>'
    })

    const renderItem = (el, textToSearch) => {
      const tranc = (fullText, searchText) => {
        const letterCount = 100
        const searchPos = fullText.indexOf(searchText)
        return (searchPos > letterCount / 2) ?
          fullText.slice(searchPos - letterCount / 2, searchPos + letterCount / 2) :
          fullText.slice(0, letterCount)
      }
      const highlight = text => text.replace(new RegExp(textToSearch, 'ig'), `<span class="text-primary">$&</span>`)
      return `<a href="${el.link}" class="dropdown-item search-item text-truncate">
    <h6 class="text-truncate"><b>${highlight(el.parent)}</b></h6>
    <span class="light-bold">${highlight(el.name)}</span><br>
    ${el.description ? highlight(tranc(el.description, textToSearch)) : ''}</a>`
    }
  }

  document.querySelector('#search').addEventListener('input', (event) => {
    if (event.target.value) {
      fullTextSearch(event.target.value)
    } else {
      document.querySelector('#search-result').classList.remove('show')
    }
  })
  document.querySelector('#search').addEventListener('search', (event) => {
    if (event.target.value) {
      fullTextSearch(event.target.value)
    } else {
      document.querySelector('#search-result').classList.remove('show')
    }
  })
  document.querySelector('#search').addEventListener('focus', (event) => {
    if (event.target.value) {
      fullTextSearch(event.target.value)
    }
  })
  document.querySelector('#search').addEventListener('blur', (event) => {
    setTimeout(() => document.querySelector('#search-result').classList.remove('show'), 200)
  })
  document.querySelector('#search').addEventListener('keydown', (event) => {
    if (event.key === 'Escape') {
      document.querySelector('#search-result').classList.remove('show')
    }
  })
</script>


<script src="../prism.js"></script>
<script>
  // copy link on click on anchor
  document.querySelectorAll('.anchor').forEach(e =>
          e.addEventListener('click', event => copyToClipboard(`${window.location.href.replace(window.location.hash, '')}#${event.currentTarget.dataset.id}`))
  )

  const copyToClipboard = str => new Promise(function (resolve, reject) {
    let success = false
    const listener = e => {
      e.clipboardData.clearData()
      e.clipboardData.setData('text/plain', str)
      e.preventDefault()
      success = true
    }

    document.addEventListener('copy', listener)
    document.execCommand('copy')
    document.removeEventListener('copy', listener)
    success ? resolve() : reject()
  })
</script>
<script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js"
        integrity="sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP"
        crossorigin="anonymous"></script>

<script>
  //fix intend for code tag
  document.querySelectorAll('pre').forEach(node => {
    if (node.childNodes[0].nodeName === '#text')
      node.childNodes[0].parentNode.removeChild(node.childNodes[0])
  })
  document.querySelectorAll('code').forEach(node => node.textContent = node.textContent.trim())
</script>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/lunr@2/lunr.min.js"></script>-->
<script src="../script.js"></script>

</body>
</html>
