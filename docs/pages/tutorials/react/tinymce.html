<h1>TinyMCE integration in ReactJS</h1>
<p>A simple ReactJS App integrating WIRIS MathType on a TinyMCE 5 and step-by-step information on how to build it. The  code of this example loads a rich text editor instance with a default value.</p>
<h2>Requirements</h2>
<ul>
<li><strong>npm</strong> (<em>Currently</em> v6.13.4)</li>
<li><strong>create-react-app</strong> (<em>Currently</em> v3.4.1)</li>
</ul>
<h2>How to run the demo</h2>
<pre><code class="language-sh">$ npm install
$ npm run deploy
</code></pre>
<p>Runs the app in the development mode.&lt;br /&gt;
Open <a href="http://localhost:3000">http://localhost:3000</a> to view it in the browser.</p>
<p>The page will reload if you make edits.&lt;br /&gt;
You will also see any lint errors in the console.</p>
<h2>How to add MathType to TinyMCE from scratch</h2>
<ol>
<li>
<p>Run the following through the terminal</p>
<p>Notice that <strong>$APP_NAME</strong> needs to be replaced by the name that you choose.</p>
<pre><code class="language-sh">$ create-react-app $APP_NAME
$ cd $APP_NAME
$ npm install --save @tinymce/tinymce-react
$ npm install tinymce
$ npm install @wiris/mathtype-tinymce5
$ npm install jquery --save
</code></pre>
</li>
<li>
<p>Replace all the content in <em>src/index.js</em> by:</p>
<pre><code class="language-js">// Default create-react-app imports
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import * as serviceWorker from './serviceWorker';

// Import the react editor TinyMCE component.
import { Editor } from '@tinymce/tinymce-react';

// Add jquery.
import $ from 'jquery';

// Load wiris formula render script.
const jsDemoImagesTransform = document.createElement('script');
jsDemoImagesTransform.type = 'text/javascript';
jsDemoImagesTransform.src = 'https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image';
document.head.appendChild(jsDemoImagesTransform);

// This needs to be included before the '@wiris/mathtype-tinymce5' is loaded synchronously
window.$ = $;
window.tinymce = require('tinymce');  // Expose the TinyMCE to the window.

// Load wiris plugin synchronously.
require('@wiris/mathtype-tinymce5');

// Set the initial editor content
const content = '&lt;p class=&quot;text&quot;&gt; Double click on the following formula to edit it.&lt;/p&gt;&lt;p style=&quot;text-align:center;&quot;&gt;&lt;math&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mo&gt;-&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo&gt;&amp;PlusMinus;&lt;/mo&gt;&lt;msqrt&gt;&lt;msup&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo&gt;-&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/msqrt&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;&lt;/p&gt;';

// Init the editor and define its options
const options = {
    height: 500,
    menubar: false,
    
    // Add wiris plugin
    external_plugins: {
        'tiny_mce_wiris' : `${window.location.href}/node_modules/@wiris/mathtype-tinymce5/plugin.min.js`
    },
    plugins: [
        'advlist autolink lists link image charmap print preview anchor',
        'searchreplace visualblocks code fullscreen',
        'insertdatetime media table paste code help wordcount '
    ],
    toolbar: [
        ' bold italic |' +
        'tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry '
    ],
    htmlAllowedTags:  ['.*'],
    htmlAllowedAttrs: ['.*'],
};

/* Create a component to be rendered later.
This is important to remove complexity from the reactDom.render
and to be able to add other functionality. */
class EditorTiny extends React.Component {
    render() {
        return (
            &lt;Editor init ={ options } initialValue = { content } /&gt;
        );
    }
}

ReactDOM.render(&lt;EditorTiny /&gt;, document.getElementById('root'));

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://bit.ly/CRA-PWA
serviceWorker.unregister();
</code></pre>
</li>
<li>
<p>Add the following script on the head of the <em>public/index.html</em></p>
<pre><code class="language-html">&lt;script src=&quot;https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js&quot; referrerpolicy=&quot;origin&quot;&gt;&lt;/script&gt;
</code></pre>
</li>
<li>
<p>Finally, you are ready to run the development server through the specified command <code>npm run start</code></p>
</li>
<li>
<p>The <strong>content</strong> can be empty or anything you want to set as the initial editor content.</p>
</li>
</ol>
<h2>How to run the tests</h2>
<pre><code class="language-sh">$ npm run test
</code></pre>
<p>Launches the test runner in the interactive watch mode.&lt;br /&gt;
See the section about <a href="https://facebook.github.io/create-react-app/docs/running-tests">running tests</a> for more information.</p>
<h2>Learn More</h2>
<p>Checkout the <a href="FAQs.md">FAQ</a> file learn more about the most frequent asked questions.</p>
<p>You can learn more in the <a href="https://facebook.github.io/create-react-app/docs/getting-started">Create React App documentation</a>.</p>
<p>To learn React, check out the <a href="https://reactjs.org/">React documentation</a>.</p>
<p>For more information about the TinyMCE or it’s options, you can check their <a href="https://www.tiny.cloud/docs/integrations/react/">documentation</a>.</p>
<p>To get more information about wiris MathType you can check on the <a href="http://www.wiris.com/mathtype">official documentation</a></p>
<h2>License</h2>
<p>Copyright © 2010-2020 <a href="http://www.wiris.com">WIRIS</a>. Released under the <a href="../../../LICENSE">MIT License</a>.</p>
