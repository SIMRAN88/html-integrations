

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: latex.js | Source: latex.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Source: latex.js</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Accessibility.html">Accessibility</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Accessibility_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Accessibility.html#._cache">_cache</a></li><li><a href="Accessibility.html#.cache">cache</a></li><li><a href="Accessibility.html#.cache">cache</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Accessibility.html#.mathMLToAccessible">mathMLToAccessible</a></li></ul></div></li><li><a href="Configuration.html">Configuration</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Configuration_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Configuration.html#._properties">_properties</a></li><li><a href="Configuration.html#.properties">properties</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Configuration.html#.addConfiguration">addConfiguration</a></li><li><a href="Configuration.html#.get">get</a></li><li><a href="Configuration.html#.set">set</a></li><li><a href="Configuration.html#.update">update</a></li></ul></div></li><li><a href="Constants.html">Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Constants_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Constants.html#.safeBadBlackboardCharacters">safeBadBlackboardCharacters</a></li><li><a href="Constants.html#.safeGoodBlackboardCharacters">safeGoodBlackboardCharacters</a></li><li><a href="Constants.html#.safeXmlCharacters">safeXmlCharacters</a></li><li><a href="Constants.html#.safeXmlCharactersEntities">safeXmlCharactersEntities</a></li><li><a href="Constants.html#.xmlCharacters">xmlCharacters</a></li></ul></div></li><li><a href="ContentManager.html">ContentManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ContentManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="ContentManager.html#customEditors">customEditors</a></li><li><a href="ContentManager.html#deviceProperties">deviceProperties</a></li><li><a href="ContentManager.html#editor">editor</a></li><li><a href="ContentManager.html#editorAttributes">editorAttributes</a></li><li><a href="ContentManager.html#editorListener">editorListener</a></li><li><a href="ContentManager.html#environment">environment</a></li><li><a href="ContentManager.html#integrationModel">integrationModel</a></li><li><a href="ContentManager.html#isNewElement">isNewElement</a></li><li><a href="ContentManager.html#language">language</a></li><li><a href="ContentManager.html#listeners">listeners</a></li><li><a href="ContentManager.html#mathML">mathML</a></li><li><a href="ContentManager.html#modalDialogInstance">modalDialogInstance</a></li><li><a href="ContentManager.html#toolbar">toolbar</a></li><li><a href="ContentManager.html#ua">ua</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="ContentManager.html#.getURLFromAnchorElement">getURLFromAnchorElement</a></li><li><a href="ContentManager.html#.isEditorLoaded">isEditorLoaded</a></li><li><a href="ContentManager.html#.setHrefToAnchorElement">setHrefToAnchorElement</a></li><li><a href="ContentManager.html#.setProtocolToAnchorElement">setProtocolToAnchorElement</a></li><li><a href="ContentManager.html#addEditorAsExternalDependency">addEditorAsExternalDependency</a></li><li><a href="ContentManager.html#addListener">addListener</a></li><li><a href="ContentManager.html#getToolbar">getToolbar</a></li><li><a href="ContentManager.html#hasChanges">hasChanges</a></li><li><a href="ContentManager.html#init">init</a></li><li><a href="ContentManager.html#insert">insert</a></li><li><a href="ContentManager.html#insertEditor">insertEditor</a></li><li><a href="ContentManager.html#onFocus">onFocus</a></li><li><a href="ContentManager.html#onKeyDown">onKeyDown</a></li><li><a href="ContentManager.html#onOpen">onOpen</a></li><li><a href="ContentManager.html#setEmptyMathML">setEmptyMathML</a></li><li><a href="ContentManager.html#setInitialContent">setInitialContent</a></li><li><a href="ContentManager.html#setIntegrationModel">setIntegrationModel</a></li><li><a href="ContentManager.html#setMathML">setMathML</a></li><li><a href="ContentManager.html#setModalDialogInstance">setModalDialogInstance</a></li><li><a href="ContentManager.html#setToolbar">setToolbar</a></li><li><a href="ContentManager.html#submitAction">submitAction</a></li><li><a href="ContentManager.html#updateTitle">updateTitle</a></li><li><a href="ContentManager.html#updateToolbar">updateToolbar</a></li></ul></div></li><li><a href="Core.html">Core</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Core_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Core.html#._globalListeners">_globalListeners</a></li><li><a href="Core.html#._initialized">_initialized</a></li><li><a href="Core.html#.globalListeners">globalListeners</a></li><li><a href="Core.html#.initialized">initialized</a></li><li><a href="Core.html#browser">browser</a></li><li><a href="Core.html#contentManager">contentManager</a></li><li><a href="Core.html#customEditors">customEditors</a></li><li><a href="Core.html#editionProperties">editionProperties</a></li><li><a href="Core.html#editMode">editMode</a></li><li><a href="Core.html#environment">environment</a></li><li><a href="Core.html#integrationModel">integrationModel</a></li><li><a href="Core.html#language">language</a></li><li><a href="Core.html#listeners">listeners</a></li><li><a href="Core.html#modalDialog">modalDialog</a></li><li><a href="Core.html#serviceProviderProperties">serviceProviderProperties</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Core.html#.addGlobalListener">addGlobalListener</a></li><li><a href="Core.html#addListener">addListener</a></li><li><a href="Core.html#getCustomEditors">getCustomEditors</a></li><li><a href="Core.html#getModalDialog">getModalDialog</a></li><li><a href="Core.html#init">init</a></li><li><a href="Core.html#insertElementOnSelection">insertElementOnSelection</a></li><li><a href="Core.html#insertFormula">insertFormula</a></li><li><a href="Core.html#openModalDialog">openModalDialog</a></li><li><a href="Core.html#placeCaretAfterNode">placeCaretAfterNode</a></li><li><a href="Core.html#setEnvironment">setEnvironment</a></li><li><a href="Core.html#setIntegrationModel">setIntegrationModel</a></li></ul></div></li><li><a href="CustomEditors.html">CustomEditors</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CustomEditors_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="CustomEditors.html#activeEditor">activeEditor</a></li><li><a href="CustomEditors.html#editors">editors</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="CustomEditors.html#addEditor">addEditor</a></li><li><a href="CustomEditors.html#disable">disable</a></li><li><a href="CustomEditors.html#enable">enable</a></li><li><a href="CustomEditors.html#getActiveEditor">getActiveEditor</a></li></ul></div></li><li><a href="EditorListener.html">EditorListener</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EditorListener_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="EditorListener.html#isContentChanged">isContentChanged</a></li><li><a href="EditorListener.html#waitingForChanges">waitingForChanges</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="EditorListener.html#contentChanged">contentChanged</a></li><li><a href="EditorListener.html#getIsContentChanged">getIsContentChanged</a></li><li><a href="EditorListener.html#setIsContentChanged">setIsContentChanged</a></li><li><a href="EditorListener.html#setWaitingForChanges">setWaitingForChanges</a></li><li><a href="EditorListener.html#styleChanged">styleChanged</a></li><li><a href="EditorListener.html#transformationReceived">transformationReceived</a></li></ul></div></li><li><a href="Event.html">Event</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Event_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Event.html#cancelled">cancelled</a></li><li><a href="Event.html#defaultPrevented">defaultPrevented</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Event.html#cancel">cancel</a></li><li><a href="Event.html#preventDefault">preventDefault</a></li></ul></div></li><li><a href="Image.html">Image</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Image_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Image.html#.clone">clone</a></li><li><a href="Image.html#.fixAfterResize">fixAfterResize</a></li><li><a href="Image.html#.getMetricsFromBytes">getMetricsFromBytes</a></li><li><a href="Image.html#.getMetricsFromSvgString">getMetricsFromSvgString</a></li><li><a href="Image.html#.removeImgDataAttributes">removeImgDataAttributes</a></li><li><a href="Image.html#.setImgSize">setImgSize</a></li></ul></div></li><li><a href="IntegrationModel.html">IntegrationModel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="IntegrationModel_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="IntegrationModel.html#.integrationParameters">integrationParameters</a></li><li><a href="IntegrationModel.html#callbackMethodArguments">callbackMethodArguments</a></li><li><a href="IntegrationModel.html#configurationService">configurationService</a></li><li><a href="IntegrationModel.html#core">core</a></li><li><a href="IntegrationModel.html#editorObject">editorObject</a></li><li><a href="IntegrationModel.html#environment">environment</a></li><li><a href="IntegrationModel.html#isIframe">isIframe</a></li><li><a href="IntegrationModel.html#language">language</a></li><li><a href="IntegrationModel.html#listeners">listeners</a></li><li><a href="IntegrationModel.html#managesLanguage">managesLanguage</a></li><li><a href="IntegrationModel.html#rtl">rtl</a></li><li><a href="IntegrationModel.html#serviceProviderProperties">serviceProviderProperties</a></li><li><a href="IntegrationModel.html#target">target</a></li><li><a href="IntegrationModel.html#temporalImageResizing">temporalImageResizing</a></li><li><a href="IntegrationModel.html#version">version</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="IntegrationModel.html#addEvents">addEvents</a></li><li><a href="IntegrationModel.html#callbackFunction">callbackFunction</a></li><li><a href="IntegrationModel.html#doubleClickHandler">doubleClickHandler</a></li><li><a href="IntegrationModel.html#fillNonLatexNode">fillNonLatexNode</a></li><li><a href="IntegrationModel.html#getBrowserLanguage">getBrowserLanguage</a></li><li><a href="IntegrationModel.html#getCore">getCore</a></li><li><a href="IntegrationModel.html#getLanguage">getLanguage</a></li><li><a href="IntegrationModel.html#getMathmlFromTextNode">getMathmlFromTextNode</a></li><li><a href="IntegrationModel.html#getPath">getPath</a></li><li><a href="IntegrationModel.html#getSelectedItem">getSelectedItem</a></li><li><a href="IntegrationModel.html#getSelection">getSelection</a></li><li><a href="IntegrationModel.html#getVersion">getVersion</a></li><li><a href="IntegrationModel.html#init">init</a></li><li><a href="IntegrationModel.html#insertFormula">insertFormula</a></li><li><a href="IntegrationModel.html#mousedownHandler">mousedownHandler</a></li><li><a href="IntegrationModel.html#mouseupHandler">mouseupHandler</a></li><li><a href="IntegrationModel.html#notifyWindowClosed">notifyWindowClosed</a></li><li><a href="IntegrationModel.html#openExistingFormulaEditor">openExistingFormulaEditor</a></li><li><a href="IntegrationModel.html#openNewFormulaEditor">openNewFormulaEditor</a></li><li><a href="IntegrationModel.html#setCore">setCore</a></li><li><a href="IntegrationModel.html#setEditorObject">setEditorObject</a></li><li><a href="IntegrationModel.html#setLanguage">setLanguage</a></li><li><a href="IntegrationModel.html#setTarget">setTarget</a></li><li><a href="IntegrationModel.html#updateFormula">updateFormula</a></li></ul></div></li><li><a href="Latex.html">Latex</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Latex_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Latex.html#._cache">_cache</a></li><li><a href="Latex.html#.cache">cache</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Latex.html#.getLatexFromMathML">getLatexFromMathML</a></li><li><a href="Latex.html#.getLatexFromTextNode">getLatexFromTextNode</a></li><li><a href="Latex.html#.getMathMLFromLatex">getMathMLFromLatex</a></li><li><a href="Latex.html#.parseMathmlToLatex">parseMathmlToLatex</a></li></ul></div></li><li><a href="Listeners.html">Listeners</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Listeners_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Listeners.html#listeners">listeners</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Listeners.html#.newListener">newListener</a></li><li><a href="Listeners.html#add">add</a></li><li><a href="Listeners.html#fire">fire</a></li></ul></div></li><li><a href="MathML.html">MathML</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MathML_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MathML.html#.addAnnotation">addAnnotation</a></li><li><a href="MathML.html#.addCustomEditorClassAttribute">addCustomEditorClassAttribute</a></li><li><a href="MathML.html#.containClass">containClass</a></li><li><a href="MathML.html#.encodeProperties">encodeProperties</a></li><li><a href="MathML.html#.isEmpty">isEmpty</a></li><li><a href="MathML.html#.isMathmlInAttribute">isMathmlInAttribute</a></li><li><a href="MathML.html#.mathMLEntities">mathMLEntities</a></li><li><a href="MathML.html#.removeAnnotation">removeAnnotation</a></li><li><a href="MathML.html#.removeCustomEditorClassAttribute">removeCustomEditorClassAttribute</a></li><li><a href="MathML.html#.removeSemantics">removeSemantics</a></li><li><a href="MathML.html#.removeSemanticsOcurrences">removeSemanticsOcurrences</a></li><li><a href="MathML.html#.safeXmlDecode">safeXmlDecode</a></li><li><a href="MathML.html#.safeXmlEncode">safeXmlEncode</a></li></ul></div></li><li><a href="ModalDialog.html">ModalDialog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ModalDialog_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="ModalDialog.html#deviceProperties">deviceProperties</a></li><li><a href="ModalDialog.html#rtl">rtl</a></li><li><a href="ModalDialog.html#websiteBeforeLockParameters">websiteBeforeLockParameters</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="ModalDialog.html#activateResizeStateBR">activateResizeStateBR</a></li><li><a href="ModalDialog.html#activateResizeStateTL">activateResizeStateTL</a></li><li><a href="ModalDialog.html#addClass">addClass</a></li><li><a href="ModalDialog.html#addListeners">addListeners</a></li><li><a href="ModalDialog.html#cancelAction">cancelAction</a></li><li><a href="ModalDialog.html#close">close</a></li><li><a href="ModalDialog.html#create">create</a></li><li><a href="ModalDialog.html#createModalWindowAndroid">createModalWindowAndroid</a></li><li><a href="ModalDialog.html#createModalWindowDesktop">createModalWindowDesktop</a></li><li><a href="ModalDialog.html#createModalWindowIos">createModalWindowIos</a></li><li><a href="ModalDialog.html#createResizeButtons">createResizeButtons</a></li><li><a href="ModalDialog.html#createSubmitButton">createSubmitButton</a></li><li><a href="ModalDialog.html#drag">drag</a></li><li><a href="ModalDialog.html#eventClient">eventClient</a></li><li><a href="ModalDialog.html#focus">focus</a></li><li><a href="ModalDialog.html#getContentManager">getContentManager</a></li><li><a href="ModalDialog.html#getElementId">getElementId</a></li><li><a href="ModalDialog.html#getLimitWindow">getLimitWindow</a></li><li><a href="ModalDialog.html#getScrollBarWidth">getScrollBarWidth</a></li><li><a href="ModalDialog.html#handleClosedIosSoftkeyboard">handleClosedIosSoftkeyboard</a></li><li><a href="ModalDialog.html#handleOpenedIosSoftkeyboard">handleOpenedIosSoftkeyboard</a></li><li><a href="ModalDialog.html#hideKeyboard">hideKeyboard</a></li><li><a href="ModalDialog.html#initializeResizeProperties">initializeResizeProperties</a></li><li><a href="ModalDialog.html#isIE11">isIE11</a></li><li><a href="ModalDialog.html#isRTL">isRTL</a></li><li><a href="ModalDialog.html#lockWebsiteScroll">lockWebsiteScroll</a></li><li><a href="ModalDialog.html#maximize">maximize</a></li><li><a href="ModalDialog.html#minimize">minimize</a></li><li><a href="ModalDialog.html#onKeyDown">onKeyDown</a></li><li><a href="ModalDialog.html#onWindowResize">onWindowResize</a></li><li><a href="ModalDialog.html#open">open</a></li><li><a href="ModalDialog.html#orientationChangeAndroidSoftkeyboard">orientationChangeAndroidSoftkeyboard</a></li><li><a href="ModalDialog.html#orientationChangeIosSoftkeyboard">orientationChangeIosSoftkeyboard</a></li><li><a href="ModalDialog.html#portraitMode">portraitMode</a></li><li><a href="ModalDialog.html#recalculatePosition">recalculatePosition</a></li><li><a href="ModalDialog.html#recalculateScale">recalculateScale</a></li><li><a href="ModalDialog.html#recalculateScrollBar">recalculateScrollBar</a></li><li><a href="ModalDialog.html#recalculateSize">recalculateSize</a></li><li><a href="ModalDialog.html#reExpand">reExpand</a></li><li><a href="ModalDialog.html#removeClass">removeClass</a></li><li><a href="ModalDialog.html#removeListeners">removeListeners</a></li><li><a href="ModalDialog.html#restoreModalProperties">restoreModalProperties</a></li><li><a href="ModalDialog.html#restoreState">restoreState</a></li><li><a href="ModalDialog.html#restoreWebsiteScale">restoreWebsiteScale</a></li><li><a href="ModalDialog.html#saveModalProperties">saveModalProperties</a></li><li><a href="ModalDialog.html#setContainerHeight">setContainerHeight</a></li><li><a href="ModalDialog.html#setContentManager">setContentManager</a></li><li><a href="ModalDialog.html#setPosition">setPosition</a></li><li><a href="ModalDialog.html#setResizeButtonsVisibility">setResizeButtonsVisibility</a></li><li><a href="ModalDialog.html#setSize">setSize</a></li><li><a href="ModalDialog.html#setTitle">setTitle</a></li><li><a href="ModalDialog.html#showPopUpMessage">showPopUpMessage</a></li><li><a href="ModalDialog.html#stack">stack</a></li><li><a href="ModalDialog.html#startDrag">startDrag</a></li><li><a href="ModalDialog.html#stopDrag">stopDrag</a></li><li><a href="ModalDialog.html#submitAction">submitAction</a></li><li><a href="ModalDialog.html#unlockWebsiteScroll">unlockWebsiteScroll</a></li></ul></div></li><li><a href="Parser.html">Parser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Parser_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Parser.html#.codeImgTransform">codeImgTransform</a></li><li><a href="Parser.html#.createImageSrc">createImageSrc</a></li><li><a href="Parser.html#.createShowImageSrc">createShowImageSrc</a></li><li><a href="Parser.html#.endParse">endParse</a></li><li><a href="Parser.html#.endParseEditMode">endParseEditMode</a></li><li><a href="Parser.html#.endParseSaveMode">endParseSaveMode</a></li><li><a href="Parser.html#.initParse">initParse</a></li><li><a href="Parser.html#.initParseEditMode">initParseEditMode</a></li><li><a href="Parser.html#.initParseSaveMode">initParseSaveMode</a></li><li><a href="Parser.html#.mathmlToImgObject">mathmlToImgObject</a></li><li><a href="Parser.html#.parseMathmlToImg">parseMathmlToImg</a></li></ul></div></li><li><a href="PopUpMessage.html">PopUpMessage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PopUpMessage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="PopUpMessage.html#buttonArea">buttonArea</a></li><li><a href="PopUpMessage.html#cancelButton">cancelButton</a></li><li><a href="PopUpMessage.html#closeButton">closeButton</a></li><li><a href="PopUpMessage.html#message">message</a></li><li><a href="PopUpMessage.html#overlayElement">overlayElement</a></li><li><a href="PopUpMessage.html#overlayWrapper">overlayWrapper</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="PopUpMessage.html#cancelAction">cancelAction</a></li><li><a href="PopUpMessage.html#closeAction">closeAction</a></li><li><a href="PopUpMessage.html#createButton">createButton</a></li><li><a href="PopUpMessage.html#onKeyDown">onKeyDown</a></li><li><a href="PopUpMessage.html#show">show</a></li></ul></div></li><li><a href="ServiceProvider.html">ServiceProvider</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ServiceProvider_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="ServiceProvider.html#._integrationPath">_integrationPath</a></li><li><a href="ServiceProvider.html#._listeners">_listeners</a></li><li><a href="ServiceProvider.html#._parameters">_parameters</a></li><li><a href="ServiceProvider.html#._servicePaths">_servicePaths</a></li><li><a href="ServiceProvider.html#.integrationPath">integrationPath</a></li><li><a href="ServiceProvider.html#.listeners">listeners</a></li><li><a href="ServiceProvider.html#.parameters">parameters</a></li><li><a href="ServiceProvider.html#.parameters">parameters</a></li><li><a href="ServiceProvider.html#.servicePaths">servicePaths</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="ServiceProvider.html#.addListener">addListener</a></li><li><a href="ServiceProvider.html#.createServiceURI">createServiceURI</a></li><li><a href="ServiceProvider.html#.fireEvent">fireEvent</a></li><li><a href="ServiceProvider.html#.getServerLanguageFromService">getServerLanguageFromService</a></li><li><a href="ServiceProvider.html#.getServerURL">getServerURL</a></li><li><a href="ServiceProvider.html#.getService">getService</a></li><li><a href="ServiceProvider.html#.getServicePath">getServicePath</a></li><li><a href="ServiceProvider.html#.getUrl">getUrl</a></li><li><a href="ServiceProvider.html#.init">init</a></li><li><a href="ServiceProvider.html#.setServicePath">setServicePath</a></li></ul></div></li><li><a href="StringManager.html">StringManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="StringManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="StringManager.html#.language">language</a></li><li><a href="StringManager.html#.strings">strings</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="StringManager.html#.get">get</a></li></ul></div></li><li><a href="TelemetryService.html">TelemetryService</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TelemetryService_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="TelemetryService.html#._senderId">_senderId</a></li><li><a href="TelemetryService.html#._sessionId">_sessionId</a></li><li><a href="TelemetryService.html#.deployment">deployment</a></li><li><a href="TelemetryService.html#.endpoint">endpoint</a></li><li><a href="TelemetryService.html#.sender">sender</a></li><li><a href="TelemetryService.html#.senderId">senderId</a></li><li><a href="TelemetryService.html#.session">session</a></li><li><a href="TelemetryService.html#.sessionId">sessionId</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="TelemetryService.html#.composeBody">composeBody</a></li><li><a href="TelemetryService.html#.composeUUID">composeUUID</a></li><li><a href="TelemetryService.html#.send">send</a></li></ul></div></li><li><a href="TextCache.html">TextCache</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TextCache_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="TextCache.html#cache">cache</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="TextCache.html#get">get</a></li><li><a href="TextCache.html#populate">populate</a></li></ul></div></li><li><a href="Util.html">Util</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Util_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Util.html#.addArgument">addArgument</a></li><li><a href="Util.html#.addClass">addClass</a></li><li><a href="Util.html#.addElementEvents">addElementEvents</a></li><li><a href="Util.html#.addEvent">addEvent</a></li><li><a href="Util.html#.b64ToByteArray">b64ToByteArray</a></li><li><a href="Util.html#.compareStrings">compareStrings</a></li><li><a href="Util.html#.concatenateUrl">concatenateUrl</a></li><li><a href="Util.html#.containsClass">containsClass</a></li><li><a href="Util.html#.convertOldXmlinitialtextAttribute">convertOldXmlinitialtextAttribute</a></li><li><a href="Util.html#.createElement">createElement</a></li><li><a href="Util.html#.createHttpRequest">createHttpRequest</a></li><li><a href="Util.html#.createObject">createObject</a></li><li><a href="Util.html#.createObjectCode">createObjectCode</a></li><li><a href="Util.html#.decode64">decode64</a></li><li><a href="Util.html#.fireEvent">fireEvent</a></li><li><a href="Util.html#.fixedCharCodeAt">fixedCharCodeAt</a></li><li><a href="Util.html#.getElementsByNameFromString">getElementsByNameFromString</a></li><li><a href="Util.html#.getNodeLength">getNodeLength</a></li><li><a href="Util.html#.getSelectedItem">getSelectedItem</a></li><li><a href="Util.html#.getSelectedItemOnTextarea">getSelectedItemOnTextarea</a></li><li><a href="Util.html#.getWIRISImageOutput">getWIRISImageOutput</a></li><li><a href="Util.html#.htmlEntities">htmlEntities</a></li><li><a href="Util.html#.htmlEntitiesDecode">htmlEntitiesDecode</a></li><li><a href="Util.html#.httpBuildQuery">httpBuildQuery</a></li><li><a href="Util.html#.propertiesToString">propertiesToString</a></li><li><a href="Util.html#.readByte">readByte</a></li><li><a href="Util.html#.readBytes">readBytes</a></li><li><a href="Util.html#.readInt32">readInt32</a></li><li><a href="Util.html#.removeClass">removeClass</a></li><li><a href="Util.html#.removeEvent">removeEvent</a></li><li><a href="Util.html#.updateExistingTextOnTextarea">updateExistingTextOnTextarea</a></li><li><a href="Util.html#.updateTextArea">updateTextArea</a></li><li><a href="Util.html#.urlEncode">urlEncode</a></li><li><a href="Util.html#.urlToAssArray">urlToAssArray</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3><a href="global.html">Global</a></h3></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import TextCache from './textcache';
import MathML from './mathml';
import ServiceProvider from './serviceprovider';
import Constants from './constants';
import Util from './util';

/**
 * @classdesc
 * This class represents a LaTeX parser. Manages the services which allows to convert
 * LaTeX into MathML and MathML into LaTeX.
 */
export default class Latex {
  /**
   * Static property.
   * Return latex cache.
   * @private
   * @type {Cache}
   */
  static get cache() {
    return Latex._cache;
  }

  /**
   * Static property setter.
   * Set latex cache.
   * @param {Cache} value - The property value.
   * @ignore
  */
  static set cache(value) {
    Latex._cache = value;
  }

  /**
   * Converts MathML to LaTeX by calling mathml2latex service. For text services
   * we call a text service with the param mathml2latex.
   * @param {String} mathml - MathML String.
   * @return {String} LaTeX string generated by the MathML argument.
   */
  static getLatexFromMathML(mathml) {
    const mathmlWithoutSemantics = MathML.removeSemantics(mathml);
    /**
     * @type {TextCache}
     */
    const { cache } = Latex;

    const data = {
      service: 'mathml2latex',
      mml: mathmlWithoutSemantics,
    };

    const jsonResponse = JSON.parse(ServiceProvider.getService('service', data));

    // TODO: Error handling.
    let latex = '';

    if (jsonResponse.status === 'ok') {
      latex = jsonResponse.result.text;
      const latexHtmlEntitiesEncoded = Util.htmlEntities(latex);
      // Inserting LaTeX semantics.
      const mathmlWithSemantics = MathML.addAnnotation(mathml, latexHtmlEntitiesEncoded, 'LaTeX');
      cache.populate(latex, mathmlWithSemantics);
    }

    return latex;
  }

  /**
   * Converts LaTeX to MathML by calling latex2mathml service. For text services
   * we call a text service with the param latex2mathml.
   * @param {String} latex - String containing a LaTeX formula.
   * @param {Boolean} includeLatexOnSemantics
   * - If true LaTeX would me included into MathML semantics.
   * @return {String} MathML string generated by the LaTeX argument.
   */
  static getMathMLFromLatex(latex, includeLatexOnSemantics) {
    /**
     * @type {TextCache}
     */
    const latexCache = Latex.cache;

    if (Latex.cache.get(latex)) {
      return Latex.cache.get(latex);
    }
    const data = {
      service: 'latex2mathml',
      latex,
    };

    if (includeLatexOnSemantics) {
      data.saveLatex = '';
    }

    const jsonResponse = JSON.parse(ServiceProvider.getService('service', data));

    let output;
    if (jsonResponse.status === 'ok') {
      let mathml = jsonResponse.result.text;
      mathml = mathml.split('\r').join('').split('\n').join(' ');

      // Populate LatexCache.
      if (mathml.indexOf('semantics') === -1 &amp;&amp; mathml.indexOf('annotation') === -1) {
        mathml = MathML.addAnnotation(mathml, latex, 'LaTeX');
        output = mathml;
      } else {
        output = mathml;
      }
      if (!latexCache.get(latex)) {
        latexCache.populate(latex, mathml);
      }
    } else {
      output = `$$${latex}$$`;
    }
    return output;
  }

  /**
   * Converts all occurrences of MathML code to LaTeX.
   * The MathML code should containing &lt;annotation encoding="LaTeX"/> to be converted.
   * @param {String} content - A string containing MathML valid code.
   * @param {Object} characters - An object containing special characters.
   * @return {String} A string containing all MathML annotated occurrences
   * replaced by the corresponding LaTeX code.
   */
  static parseMathmlToLatex(content, characters) {
    let output = '';
    const mathTagBegin = `${characters.tagOpener}math`;
    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;
    const openTarget = `${characters.tagOpener}annotation encoding=${characters.doubleQuote}LaTeX${characters.doubleQuote}${characters.tagCloser}`;
    const closeTarget = `${characters.tagOpener}/annotation${characters.tagCloser}`;
    let start = content.indexOf(mathTagBegin);
    let end = 0;
    let mathml;
    let startAnnotation;
    let closeAnnotation;

    while (start !== -1) {
      output += content.substring(end, start);
      end = content.indexOf(mathTagEnd, start);

      if (end === -1) {
        end = content.length - 1;
      } else {
        end += mathTagEnd.length;
      }

      mathml = content.substring(start, end);

      startAnnotation = mathml.indexOf(openTarget);
      if (startAnnotation !== -1) {
        startAnnotation += openTarget.length;
        closeAnnotation = mathml.indexOf(closeTarget);
        let latex = mathml.substring(startAnnotation, closeAnnotation);
        if (characters === Constants.safeXmlCharacters) {
          latex = MathML.safeXmlDecode(latex);
        }
        output += `$$${latex}$$`;
        // Populate latex into cache.

        Latex.cache.populate(latex, mathml);
      } else {
        output += mathml;
      }
      start = content.indexOf(mathTagBegin, end);
    }

    output += content.substring(end, content.length);
    return output;
  }

  /**
   * Extracts the latex of a determined position in a text.
   * @param {Node} textNode - textNode to extract the LaTeX
   * @param {Number} caretPosition - Starting position to find LaTeX.
   * @param {Object} latexTags - Optional parameter representing tags between latex is inserted.
   * It has the 'open' attribute for the open tag and the 'close' attribute for the close tag.
   * "$$" by default.
   * @return {Object} An object with 3 keys: 'latex', 'start' and 'end'. Null if latex is not found.
   * @static
   */
  static getLatexFromTextNode(textNode, caretPosition, latexTags) {
    // TODO: Set LaTeX Tags as Core variable. Fix the call to this function (third argument).
    // Tags used for LaTeX formulas.
    const defaultLatexTags = {
      open: '$$',
      close: '$$',
    };
    // latexTags is an optional parameter. If is not set, use default latexTags.
    if (typeof latexTags === 'undefined' || latexTags == null) {
      latexTags = defaultLatexTags;
    }
    // Looking for the first textNode.
    let startNode = textNode;

    while (startNode.previousSibling &amp;&amp; startNode.previousSibling.nodeType === 3) { // TEXT_NODE.
      startNode = startNode.previousSibling;
    }

    /**
     * Returns the next latex position and node from a specific node and position.
     * @param {Node} currentNode - Node where searching latex.
     * @param {Number} currentPosition - Current position inside the currentNode.
     * @param {Object} latexTagsToUse - Tags used at latex beginning and latex final.
     * "$$" by default.
     * @param {Boolean} tag - Tag containing the current search.
     * @returns {Object} Object containing the current node and the position.
     */
    function getNextLatexPosition(currentNode, currentPosition, tag) {
      let position = currentNode.nodeValue.indexOf(tag, currentPosition);

      while (position === -1) {
        currentNode = currentNode.nextSibling;

        if (!currentNode) { // TEXT_NODE.
          return null; // Not found.
        }

        position = currentNode.nodeValue ? currentNode.nodeValue.indexOf(latexTags.close) : -1;
      }

      return {
        node: currentNode,
        position,
      };
    }

    /**
     * Determines if a node is previous, or not, to a second one.
     * @param {Node} node - Start node.
     * @param {Number} position - Start node position.
     * @param {Node} endNode - End node.
     * @param {Number} endPosition - End node position.
     * @returns {Boolean} True if the starting node is previous thant the en node. false otherwise.
     */
    function isPrevious(node, position, endNode, endPosition) {
      if (node === endNode) {
        return (position &lt;= endPosition);
      }
      while (node &amp;&amp; node !== endNode) {
        node = node.nextSibling;
      }

      return (node === endNode);
    }

    let start;
    let end = {
      node: startNode,
      position: 0,
    };
    // Is supposed that open and close tags has the same length.
    const tagLength = latexTags.open.length;
    do {
      start = getNextLatexPosition(end.node, end.position, latexTags.open);

      if (start == null || isPrevious(textNode, caretPosition, start.node, start.position)) {
        return null;
      }

      end = getNextLatexPosition(start.node, start.position + tagLength, latexTags.close);

      if (end == null) {
        return null;
      }

      end.position += tagLength;
    } while (isPrevious(end.node, end.position, textNode, caretPosition));

    // Isolating latex.
    let latex;

    if (start.node === end.node) {
      latex = start.node.nodeValue.substring(start.position + tagLength, end.position - tagLength);
    } else {
      const index = start.position + tagLength;
      latex = start.node.nodeValue.substring(index, start.node.nodeValue.length);
      let currentNode = start.node;

      do {
        currentNode = currentNode.nextSibling;
        if (currentNode === end.node) {
          latex += end.node.nodeValue.substring(0, end.position - tagLength);
        } else {
          latex += currentNode.nodeValue ? currentNode.nodeValue : '';
        }
      } while (currentNode !== end.node);
    }

    return {
      latex,
      startNode: start.node,
      startPosition: start.position,
      endNode: end.node,
      endPosition: end.position,
    };
  }
}

/**
 * Text cache. Stores all processed LaTeX strings and it's correspondent MathML string.
 * @type {Cache}
 * @static
 */
Latex._cache = new TextCache();
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
